[B to Y about Git](https://enhanced.kr/postviewer/629) 시리즈의 글입니다.

만약 폭풍 코딩 중에 건물에 화재가 나면 여러분은 무엇을 먼저 할 것인가. 노트북을 챙길 수도 있겠지만 그럼 탈출시 한 손을 제대로 쓸 수 없고, 데스크탑으로 코딩 중이었을 수도 있다. 가장 좋은 방법은 `add`, `commit`, `push` 명령을 순서대로 쳐놓고 도망치는 것이다. 이 말이 이해된다면 본 포스트의 내용을 제대로 이해한 것이라 볼 수 있다.

| <img src="https://raw.githubusercontent.com/3jins/Images/master/git_on_fire.jpg" width="50%"/> |
| :----------------------------------------------------------: |
|                목숨보다는 역시 코드가 먼저다.                |

add, commit, push 정도만 할 줄 알면 Git으로 협업은 못하더라도, 혼자서 포트폴리오로 쓰기 위한 깃헙 페이지를 꾸미거나, 자신의 코드를 백업하는 용도로는 쓸 수 있다고 봐도 된다. 



## Commit

`add`, `commit`, `push`의 세 명령어를 논하기 전에 우선 commit이 무엇인지에 대한 개념을 잡고 가야 하겠다. commit은 일종의 체크포인트다. 앞으로 `git reset`, `git rebase` 등 코드를 과거로 역행시키는 여러 명령을 만나보게 될 텐데, 이 명령들이 과거로 되돌아가는 기준점으로 삼는 게 commit이다. 옛날에 보다 만 웹툰인데 [체크포인트](https://comic.naver.com/webtoon/list.nhn?titleId=677452)라는 웹툰이 있었다. 주인공은 시점 하나를 체크포인트로 정해놓고 그 시점으로 얼마든지 돌아갈 수 있는 초능력자다. 이 체크포인트가 바로 Git의 커밋이다. 다만, 웹툰의 주인공은 체크포인트를 하나밖에 못 만들지만 Git은 몇개든지 무제한으로 만들 수 있다.

| <img src="https://raw.githubusercontent.com/3jins/Images/master/checkpoint.png" width="50%"/> |
| :----------------------------------------------------------: |
| 주인공이 구상한 소설의 설정인 척하고 자기 능력을 알려주는 장면 |

따라서 커밋이 너무 많으면 돌아갈 시점을 찾기가 어렵고, 커밋이 너무 적으면 원하는 시점으로 되돌아갈 수 없다. 커밋은 보통 '수정이 의미를 갖는 최소의 단위'마다 하라고 권한다. 애매모호한 표현이지만, 커밋의 존재이유를 생각해본다면, 대강 어떤 시점에 커밋을 해야 할 지 감이 올 것이다.



## add, commit, push

이제 본격적으로 세 명령에 대해 알아보자.

### git add

`git add` 명령은 마지막 커밋 이후로 수정된 파일들을 'staging area'에 올린다.  이 상태를 'staged' 되었다고 한다. `staging area`란 커밋하기 전에 변경된 파일들을 보관하는 일종의 버퍼다. `git commit` 명령은 `staging area`에 올라가있는 파일들에만 적용되기 때문에 커밋 전에 마지막으로 어떤 파일들만 커밋할 것인가를 결정할 수 있다. `git add` 명령에 인자로 `.`을 주면 현재 디렉토리 이하의 모든 변경내역을 staging area에 올리며, 인자로 경로를 포함한 파일명을 주면 해당 파일만 staging area에 올릴 수 있다.

#### git status

어떤 파일들이 수정됐고, 어떤 파일들이 staged 되어 있는지를 확인할 수 있다. 설정에 따라 다르겠지만 기본설정 기준으로 변경되기만 한 파일들은 빨간색으로, staged 된 파일은 녹색으로 표시된다.

#### git reset

staged 된 파일을 다시 unstaged 상태로 만들 수 있다. 아무 인자를 주지 않으면 모든 파일을 unstaged 상태로 만들며, 경로 및 파일명을 인자로 주면 특정 파일만 unstaged 상태로 만들 수 있다. 참고로 `git reset` 명령에는 `--hard`나 `--soft`와 같은 옵션을 줄 수 있다. 이에 대해서는 다음 포스트에서 따로 다루도록 하겠다.

### git commit

앞서 말했다시피 staging area에 있는 파일들을 커밋한다. 해당 명령을 치면 다음처럼 vim 편집기가 열린다.

<img src="https://raw.githubusercontent.com/3jins/Images/master/git_commit_waanaberich.png" width="100%"/>

주석 돼있는거 건드리지 말고 첫 줄에다가 커밋 메시지를 쓰면 된다. 커밋 메시지의 작성법은 [여기](https://item4.github.io/2016-11-01/How-to-Write-a-Git-Commit-Message/)가 잘 정리돼있으니 참고해보면 좋겠다. 물론, 같이 작업하는 팀에서 작성규칙을 정해놓았다면 그걸 따라야 한다.

#### git log

커밋 이력을 확인해볼 수 있다. `git log -3`처럼 숫자를  옵션으로 주면 가장 최근의 커밋 몇개만 볼 수 있다. 그 외에도 알아두면 유용한 옵션이 많으니 궁금하신 분들은 [여기](file:///C:/Program%20Files/Git/mingw64/share/doc/git-doc/git-log.html)를 참고해보자.

### git push

commit 내역을 리모트 레포에 업로드한다. 리모트 레포와 로컬 레포 사이에 충돌사항이 없다면 자연스럽게 수정사항이 리모트 레포에 반영된다. 

`--hard`라는 옵션이 있는데, 이 옵션은 원격 레포에 뭐가 있든지 무시하고 그냥 내 로컬의 코드로 다 덮어써버리겠다는 뜻이다. 혼자 작업할 때는 써도 별로 상관없겠지만, 협업시에는 절대 써서는 안된다.

