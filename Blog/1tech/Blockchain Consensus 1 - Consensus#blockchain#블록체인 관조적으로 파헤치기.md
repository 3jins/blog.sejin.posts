[블록체인 관조적으로 파헤치기](http://enhanced.kr/postviewer/374) 시리즈의 글입니다.

합의 알고리즘은 블록체인의 트랜잭션이 유효한지 검증하기 위한 수단이다. 합의 알고리즘이 제대로 만들어져있지 않으면 한 노드가 장부를 조작해놓고 뻑뻑 우겨서 블록체인의 유일한 장점인 무결성을 무너뜨릴 수도 있다. 따라서 합의 알고리즘은 블록체인의 핵심이라 할 수 있다.

합의 알고리즘에 대해 직관적으로 이해할 수 있는 예시를 하나 들겠다. 작년에 스키장에 놀러간 적이 있다. 그 때 어떤 형이 빌린 돈을 갚으며 이런 말을 했다.

> 자, 저를 포함한 여기 있는 네 사람이 증인입니다. 블록체인 형성한 겁니다.

위의 예는 5명 중 4명이 인정하면 트랜잭션을 인정하기로 합의하는 간단한 알고리즘이다. 실제 블록체인에서는 여기에 nonce를 찾는 노가다 작업과 그에 대한 보상 개념이 추가되긴 하지만 어쨌든 직관적으로 합의 알고리즘이 뭔지 이해가 되지 않는가? ~~나만 그런가~~



## 비잔틴 장군 문제 

비잔틴 장군 문제는 분산 시스템 진영에서 오랜 시간 해결하지 못한 난제다. 그리고 어느 날 작업증명(Proof-of-Work)이라는 알고리즘이 뿅하고 나타나서 이 문제를 해결하고, 그 이후 블록체인이 세상에 나타나게 되었다.

비잔틴 장군 문제는 다음과 같다.

> 비잔티움의 장군들이 협력하여 성 하나를 함락시키려 한다. 그들은 서로에게 전령을 보내 한 순간에 일제히 성을 공략하려 하지만 장군들 중에 배신자가 있어서 전령을 죽이거나 잘못된 정보를 전파할 수 있다. 장군들이 과연 성을 함락시킬 수 있는가.

장군들이 전령을 보낼 때 '노가다' 작업이 추가된다면 배신자의 수가 절반 미만일 때 성을 함락할 수 있다. 전령들이 순간이동이 가능해서 전령을 보내는 비용이 없다면 배신자 1명이 자신이 보낸 전령만으로 정보를 완전히 위조해버릴 수 있지만, 전령이 다른 장군에게 뛰어가는데 1시간씩 걸리고 한 번에 한 명의 전령만 보낼 수 있다면 소수의 배신자가 전체 정보를 위조하는 게 불가능하다. 

이 '노가다' 작업을 추가한 합의 알고리즘이 바로 **작업증명(Proof-of-Work, PoW)**이다. 다음 글에서 다뤄보도록 하겠다.