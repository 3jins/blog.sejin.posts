때는 바야흐로 6년 전, 코딩의 ㅋ은 고사하고 ㅋ의 첫 획도 잘 모르던 시절이었다. 자바를 가르치던 교수님이 파일입출력에 관한 코딩퀴즈를 본다고 하셔서, 해당 문법을 숙지하고 집에서 간단하게 시나리오 만들어서 일종의 모의고사를 쳐보고 갔었다. 시험문제는 매우 간단한 것이었고, 난 막힘없이 코드를 쭉 짜내려갔다. 그리고 실행을 시킨 그 순간, 원인 모를 에러들을 잔뜩 만나게 되었고, 결국 그 때의 난 미완성된 코드를 제출할 수밖에 없었다.

이런 일이 있었던 이유는 코드를 짜는 동안에 테스트를 전혀 하지 않았기 때문이다. 물론 워낙 간단한 기능이라 거창하게 테스트라 칭할 정도는 아니지만, 파일시스템에서 내용을 읽어오는 함수를 호출한 다음, **의도한 대로 변수에 값이 잘 들어있는지** 정도만 확인했어도 훨씬 빠르게 기능을 완성할 수 있었을 것이다. 



## 테스트 주도 개발?

테스트 프레임워크를 쓰게 되면 자연스럽게 다음의 순서로 개발을 진행하게 된다.

1. 구현해야 하는 기능을 생각해본다.
2. 구현하려는 기능이 어떻게 동작해야 하는지 구체적으로 나열한다.
3. 나열한 각 항목을 테스트하는 함수를 작성한다.
4. 기능을 구현해본다.
5. 일부 테스트가 실패하는 것을 확인한다.
6. 모든 테스트가 통과될 때까지 4번과 5번을 반복한다.

애송이에 불과한 내 부족한 식견으로는 이게 진정한 테스트 주도 개발 프로세스라고 볼 수 있는지는 잘 모르겠다. 하나 확실한 건 위 서론에서 언급한 것처럼 변수에 값이 잘 들어있는지 출력 정도만 하고 넘어가는 것에 비해 이 프로세스가 갖는 분명한 이점이 있다는 것이다. 이점은 다음과 같다.

1. 테스트만 읽어봐도 각 기능이 구체적으로 어떤 역할을 수행해야 하는지 명확하게 드러난다.
2. 구현하기 전에 테스트를 작성하기 때문에 설계미스의 가능성이 줄어든다.
3. 기능 요구사항에 변경이 생겼을 때 이전에 진행한 테스트를 재활용할 수 있다.

이 외에 이점이 더 있을지도 모르겠다. 어쨌든 프로세스에 테스트가 도입되면 좋다. 프로젝트의 규모가 클수록, 개발자가 실수를 많이 할 수록.



## 테스트 프레임워크 선정

### Which one is "trendy"?

| <img src="https://raw.githubusercontent.com/3jins/Images/master/test-framework-downloads-comparison.png" width="80%"/><br /><img src="https://raw.githubusercontent.com/3jins/Images/master/test-framework-stats-comparison.png" width="80%"/> |
| :----------------------------------------------------------: |
|                 Mocha와 Jest가 '트렌디'하다.                 |

[npm 라이브러리의 트렌드를 파악할 수 있게 도와주는 사이트](https://www.npmtrends.com/ava-vs-jasmine-vs-jest-vs-mocha-vs-qunit)가 있다. 여기에서 [AVA](https://github.com/avajs/ava), [Jasmine](https://jasmine.github.io/), [Jest](https://jestjs.io/), [Mocha](https://mochajs.org/), [QUnit](https://qunitjs.com/)의 5개 프레임워크를 비교해보면, 현재 Jest, Mocha, Jasmine이 현재 활발히 쓰이고 있으며, Jasmine은 오픈소스 활동이 거의 중단되었음을 볼 수 있다. 따라서 발생할 수 있는 이슈에 대한 커뮤니티의 도움을 기대한다면, Jest와 Mocha 중 하나를 선택하면 될 것이다.

### Jest vs Mocha

두 프레임워크가 각각 표방하는 대표적인 특징은 다음과 같다.

- Jest: 통합 프레임워크이므로 테스트 더블 등을 별도로 설치할 필요가 없다.
- Mocha: 가볍고 다른 라이브러리와 함께 쓸 수 있는 유연함이 있다.

둘은 정반대의 특징을 서로 장점이라고 내세우고 있는 모양새다. 아주 제대로, 체계적으로 테스트를 해야 하는 상황이라 온갖 라이브러리 다 설치하고 설정 잡아주기 귀찮으면 Jest를 쓰고, 그게 아니면 Mocha를 쓰면 될 것 같다. 내 경우는 일개 애송이의 개인 프로젝트 규모이므로 Mocha를 쓰는 게 낫겠다고 판단한다.

